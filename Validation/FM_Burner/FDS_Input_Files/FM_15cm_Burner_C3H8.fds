! N. Ren, D. Zeng, K.V. Meredith, Y. Wang, S.B. Dorofeev, Modeling of flame extinction/re-ignition in
!       oxygen-reduced environments, In Proc. Combust. Inst., 2018.
!
! D. Zeng, Y. Wang, Dependence of Limiting Oxygen Index of Buoyant Turbulent non-premixed Flame on Fuel,
!       In 26th ICDERS, Boston, MA, 2017.

&HEAD CHID='FM_15cm_Burner_C3H8', TITLE='LOI test for FM 15 cm burner'/

! coarse outer meshes (dx=1 cm)
&MULT ID='m1', DX=0.244,DY=0.244,DZ=0.360,
      I_LOWER_SKIP=2,I_UPPER_SKIP=2,I_UPPER=4,
      J_LOWER_SKIP=2,J_UPPER_SKIP=2,J_UPPER=4,
      K_LOWER_SKIP=0,K_UPPER_SKIP=1,K_UPPER=4/ 123 mesh
&MESH IJK=24,24,36, XB=-0.610,-0.366,-0.610,-0.366,-0.150,0.210, MULT_ID='m1'/ domain is 1.22 m x 1.22 x 1.80 m

! refined meshes around burner (dx=1 cm, D*/dx=15)
&MULT ID='m2', DX=0.244,DY=0.244,DZ=0.360, I_UPPER=0,J_UPPER=0,K_UPPER=1/ 2 mesh
&MESH IJK=24,24,36, XB=-0.122,0.122,-0.122,0.122,-0.150,0.210, MULT_ID='m2', CHECK_MESH_ALIGNMENT=T, COLOR='RED'/

! refined meshes around burner (dx=5 mm, D*/dx=30)
! &MULT ID='m2', DX=0.244,DY=0.244,DZ=0.360, I_UPPER=0,J_UPPER=0,K_UPPER=1/ 2 mesh
! &MESH IJK=48,48,72, XB=-0.122,0.122,-0.122,0.122,-0.150,0.210, MULT_ID='m2', CHECK_MESH_ALIGNMENT=T, COLOR='RED'/

! refined meshes around burner (dx=2.5 mm, D*/dx=60)
! &MULT ID='m2', DX=0.122,DY=0.122,DZ=0.180, I_UPPER=1,J_UPPER=1,K_UPPER=3/ 16 mesh
! &MESH IJK=48,48,72, XB=-0.122,0.000,-0.122,0.000,-0.150,0.030, MULT_ID='m2', CHECK_MESH_ALIGNMENT=T, COLOR='RED'/

! refined meshes around burner (dx=1.3 mm, D*/dx=120)
! &MULT ID='m2', DX=0.061,DY=0.061,DZ=0.090, I_UPPER=3,J_UPPER=3,K_UPPER=7/ 128 mesh
! &MESH IJK=48,48,72, XB=-0.122,-.061,-0.122,-.061,-0.150,-.060, MULT_ID='m2', CHECK_MESH_ALIGNMENT=T, COLOR='RED'/

&TIME T_END=65/

&DUMP DT_DEVC=1, DT_HRR=1, DT_PART=65 /

&SPEC ID='NITROGEN' /

&COMB RADIATIVE_FRACTION=0.0, N_SIMPLE_CHEMISTRY_REACTIONS=2 /

&REAC FUEL='PROPANE', AUTO_IGNITION_TEMPERATURE=450. / SFPE Table 2-8.2

&SURF ID='side wall', COLOR='LIGHT BLUE', TRANSPARENCY=0.5, DEFAULT=T/
&SURF ID='wall', COLOR='GRAY'/
&SURF ID='burner', HRRPUA=551.1, COLOR='RED'/ D* = 0.152 m (10 kW)
&SURF ID='coflow', COLOR='BLUE',
      SPEC_ID(1)='AIR',      MASS_FLUX(1)=0.223, RAMP_MF(1)='O2 RAMP'
      SPEC_ID(2)='NITROGEN', MASS_FLUX(2)=0.360, RAMP_MF(2)='N2 RAMP' / 21 to 8 vol % O2

&RAMP ID='O2 RAMP', T= 0.0, F=1.00 /
&RAMP ID='O2 RAMP', T=65.0, F=1.00 /

&RAMP ID='N2 RAMP', T= 0.0, F=0.00 /
&RAMP ID='N2 RAMP', T= 5.0, F=0.00 /
&RAMP ID='N2 RAMP', T=65.0, F=1.00 /

 SURF ID='SUCK', VOLUME_FLOW=0.3 /
 OBST XB=-0.300,-0.300,-0.300, 0.300, 1.400, 1.600 /
 OBST XB= 0.300, 0.300,-0.300, 0.300, 1.400, 1.600 /
 OBST XB=-0.300, 0.300,-0.300,-0.300, 1.400, 1.600 /
 OBST XB=-0.300, 0.300, 0.300, 0.300, 1.400, 1.600 /
 OBST XB=-0.300, 0.300,-0.300, 0.300, 1.600, 1.620, SURF_IDS='INERT','INERT','SUCK' /

&MULT ID='cube array', DX=0.0025,DY=0.0025,DZ=0.1500, I_UPPER=81,J_UPPER=81,K_UPPER=0/

&OBST XB=-0.1050,-0.1025,-0.1050,-0.1025,-0.1500,0.0000
      MULT_ID='cube array'
      SURF_IDS='burner','wall','wall'
      SHAPE='CYLINDER'
      RADIUS=0.076
      HEIGHT=0.15
      XYZ=0,0,-0.15
      THICKEN=T/

&PART ID='ignitor', SAMPLING_FACTOR=1, SURF_ID='pilot', STATIC=.TRUE./
&SURF ID='pilot', HRRPUA=100., RADIUS=0.0047, GEOMETRY='SPHERICAL', TMP_FRONT=2000. /
&INIT PART_ID='ignitor', XYZ=0.0,0.0,0.0, RADIUS=0.08, SHAPE='RING', N_PARTICLES=36, UNIFORM=T/

&VENT PBZ=1.65, SURF_ID='OPEN'/
&VENT PBZ=-0.150, SURF_ID='coflow'/

&SLCF PBY=0, QUANTITY='VELOCITY', VECTOR=T/
&SLCF PBY=0, QUANTITY='TEMPERATURE', CELL_CENTERED=T/
&SLCF PBY=0, QUANTITY='MASS FRACTION', SPEC_ID='PROPANE' CELL_CENTERED=T/
&SLCF PBY=0, QUANTITY='MASS FRACTION', SPEC_ID='OXYGEN' CELL_CENTERED=T/
&SLCF PBY=0, QUANTITY='MASS FRACTION', SPEC_ID='CARBON MONOXIDE' CELL_CENTERED=T/
&SLCF PBY=0, QUANTITY='MASS FRACTION', SPEC_ID='SOOT' CELL_CENTERED=T/

&DEVC ID='XO2', XYZ=0.152,0,-.149, QUANTITY='VOLUME FRACTION', SPEC_ID='OXYGEN', TIME_AVERAGED=F/

! might be useful as some point
! &DEVC XB=0,0,0,0,0,0.6, POINTS=100, QUANTITY='TEMPERATURE', ID='TMP_CL', TIME_HISTORY=T/
! &DEVC XB=0,0,0,0,0,0.6, POINTS=100, QUANTITY='MASS FRACTION', SPEC_ID='PROPANE',         ID='Y_FUEL_CL', TIME_HISTORY=T/
! &DEVC XB=0,0,0,0,0,0.6, POINTS=100, QUANTITY='MASS FRACTION', SPEC_ID='OXYGEN',          ID='Y_O2_CL',   TIME_HISTORY=T/
! &DEVC XB=0,0,0,0,0,0.6, POINTS=100, QUANTITY='MASS FRACTION', SPEC_ID='CARBON MONOXIDE', ID='Y_CO_CL',   TIME_HISTORY=T/
! &DEVC XB=0,0,0,0,0,0.6, POINTS=100, QUANTITY='MASS FRACTION', SPEC_ID='SOOT',            ID='Y_SOOT_CL', TIME_HISTORY=T/

&TAIL /
